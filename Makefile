PAPER=thesis
STYLE=snuthesis

$(PAPER).pdf: $(PAPER).tex $(STYLE).cls
	pdflatex $<
	- bibtex $(PAPER)
	pdflatex $<
	pdflatex $<
	while ( grep -q '^LaTeX Warning: Label(s) may have changed' $*.log) \
	do pdflatex $<; done

clean:
	$(RM) *.log *.aux \
	*.cfg *.glo *.idx *.toc \
	*.ilg *.ind *.out *.lof \
	*.lot *.bbl *.blg *.gls *.cut *.hd \
	*.dvi *.ps *.thm *.tgz *.zip *.rpi \
	$(PAPER).pdf
